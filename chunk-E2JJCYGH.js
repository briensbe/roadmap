import{Ac as R,Ba as O,Bc as X,Cc as Y,Dc as J,Ec as H,Fa as k,Fc as K,Hc as Z,Ia as C,Ic as $,Jc as ee,Mc as te,Na as E,Ob as T,Oc as ne,Pb as z,Rc as ie,Ta as c,Tb as W,Ua as n,Va as i,Wa as u,X as d,Y as g,a as P,ab as M,cb as f,d as S,eb as s,jb as I,kc as N,lb as V,mb as a,nb as h,nc as L,ob as v,oc as F,pc as j,qc as q,rb as x,rc as A,sb as _,ta as r,tb as b,tc as D,uc as B,wc as Q,xc as G,yc as U}from"./chunk-JLJ6XHLH.js";function oe(p,m){if(p&1){let l=M();n(0,"tr",19)(1,"td")(2,"div",20)(3,"span",21),a(4),i(),n(5,"div",22),u(6,"lucide-icon",23),a(7),i()()(),n(8,"td")(9,"code",24),a(10),i()(),n(11,"td")(12,"span",25),a(13),i()(),n(14,"td")(15,"span",26),a(16),i()(),n(17,"td",15)(18,"button",27),f("click",function(){let t=d(l).$implicit,o=s();return g(o.editSetting(t))}),u(19,"lucide-icon",28),i(),n(20,"button",29),f("click",function(){let t=d(l).$implicit,o=s();return g(o.deleteSetting(t))}),u(21,"lucide-icon",28),i()()()}if(p&2){let l=m.$implicit,e=s();r(4),h(l.key),r(),V("global",l.scope==="global"),r(),c("img",l.scope==="global"?e.GlobeIcon:e.UserIcon),r(),v(" ",l.scope," "),r(3),h(l.value),r(2),E("data-type",l.type),r(),v(" ",l.type," "),r(3),h(l.description||"-"),r(3),c("img",e.EditIcon),r(2),c("img",e.TrashIcon)}}function re(p,m){if(p&1&&(n(0,"tr")(1,"td",30),u(2,"lucide-icon",31),n(3,"p"),a(4,"Aucun param\xE8tre trouv\xE9"),i()()()),p&2){let l=s();r(2),c("img",l.SearchIcon)}}function ae(p,m){if(p&1){let l=M();n(0,"div",32),f("click",function(){d(l);let t=s();return g(t.closeModal())}),n(1,"div",33),f("click",function(t){return d(l),g(t.stopPropagation())}),n(2,"div",34)(3,"h2"),a(4),i(),n(5,"button",35),f("click",function(){d(l);let t=s();return g(t.closeModal())}),u(6,"lucide-icon",36),i()(),n(7,"form",37,0),f("ngSubmit",function(){d(l);let t=s();return g(t.saveSetting())}),n(9,"div",38)(10,"div",39)(11,"label",40),a(12,"Cl\xE9"),i(),n(13,"input",41),b("ngModelChange",function(t){d(l);let o=s();return _(o.currentSetting.key,t)||(o.currentSetting.key=t),g(t)}),i()(),n(14,"div",42)(15,"div",39)(16,"label",43),a(17,"Type"),i(),n(18,"select",44),b("ngModelChange",function(t){d(l);let o=s();return _(o.currentSetting.type,t)||(o.currentSetting.type=t),g(t)}),n(19,"option",45),a(20,"String"),i(),n(21,"option",46),a(22,"Number"),i(),n(23,"option",47),a(24,"Boolean"),i(),n(25,"option",48),a(26,"JSON"),i()()(),n(27,"div",39)(28,"label",49),a(29,"Scope"),i(),n(30,"input",50),b("ngModelChange",function(t){d(l);let o=s();return _(o.currentSetting.scope,t)||(o.currentSetting.scope=t),g(t)}),i()()(),n(31,"div",39)(32,"label",51),a(33,"Valeur"),i(),n(34,"textarea",52),b("ngModelChange",function(t){d(l);let o=s();return _(o.currentSetting.value,t)||(o.currentSetting.value=t),g(t)}),i()(),n(35,"div",39)(36,"label",53),a(37,"Description"),i(),n(38,"textarea",54),b("ngModelChange",function(t){d(l);let o=s();return _(o.currentSetting.description,t)||(o.currentSetting.description=t),g(t)}),i()()(),n(39,"div",55)(40,"button",56),f("click",function(){d(l);let t=s();return g(t.closeModal())}),a(41,"Annuler"),i(),n(42,"button",57),u(43,"lucide-icon",11),a(44," Enregistrer "),i()()()()()}if(p&2){let l=I(8),e=s();r(4),h(e.editingSetting!=null&&e.editingSetting.id?"Modifier le param\xE8tre":"Nouveau param\xE8tre"),r(2),c("img",e.XIcon),r(7),x("ngModel",e.currentSetting.key),r(5),x("ngModel",e.currentSetting.type),r(12),x("ngModel",e.currentSetting.scope),r(4),x("ngModel",e.currentSetting.value),c("placeholder",e.valuePlaceholder),r(4),x("ngModel",e.currentSetting.description),r(4),c("disabled",!l.form.valid),r(),c("img",e.SaveIcon)}}var fe=(()=>{let m=class m{get valuePlaceholder(){return this.currentSetting.type==="json"?'{ "key": "value" }':"Entrez la valeur..."}constructor(e){this.settingsService=e,this.settings=[],this.filteredSettings=[],this.searchQuery="",this.isModalOpen=!1,this.editingSetting=null,this.currentSetting=this.getDefaultSetting(),this.SettingsIcon=A,this.PlusIcon=F,this.SearchIcon=q,this.EditIcon=L,this.TrashIcon=D,this.XIcon=Q,this.SaveIcon=j,this.GlobeIcon=N,this.UserIcon=B}ngOnInit(){this.loadSettings()}loadSettings(){return S(this,null,function*(){try{this.settings=yield this.settingsService.getAllSettings(),this.filterSettings()}catch(e){console.error("Error loading settings:",e)}})}filterSettings(){if(!this.searchQuery)this.filteredSettings=[...this.settings];else{let e=this.searchQuery.toLowerCase();this.filteredSettings=this.settings.filter(t=>t.key.toLowerCase().includes(e)||t.scope.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}}getDefaultSetting(){return{key:"",value:"",type:"string",scope:"global",description:""}}openCreateModal(){this.editingSetting=null,this.currentSetting=this.getDefaultSetting(),this.isModalOpen=!0}editSetting(e){this.editingSetting=e,this.currentSetting=P({},e),this.isModalOpen=!0}deleteSetting(e){return S(this,null,function*(){if(confirm(`\xCAtes-vous s\xFBr de vouloir supprimer le param\xE8tre "${e.key}" ?`))try{e.id&&(yield this.settingsService.deleteSetting(e.id),this.loadSettings())}catch(t){console.error("Error deleting setting:",t)}})}closeModal(){this.isModalOpen=!1,this.editingSetting=null}saveSetting(){return S(this,null,function*(){try{this.editingSetting?.id?yield this.settingsService.updateSetting(this.editingSetting.id,this.currentSetting):yield this.settingsService.createSetting(this.currentSetting),this.closeModal(),this.loadSettings()}catch(e){console.error("Error saving setting:",e)}})}};m.\u0275fac=function(t){return new(t||m)(O(ie))},m.\u0275cmp=k({type:m,selectors:[["app-settings"]],decls:36,vars:7,consts:[["settingsForm","ngForm"],[1,"settings-container"],[1,"settings-header"],[1,"header-left"],[1,"header-icon",3,"img"],[1,"subtitle"],[1,"header-actions"],[1,"search-bar"],["size","18",1,"search-icon",3,"img"],["type","text","placeholder","Rechercher une cl\xE9...",3,"ngModelChange","input","ngModel"],[1,"btn-primary",3,"click"],["size","18",3,"img"],[1,"settings-grid"],[1,"settings-card"],[1,"table-container"],[1,"actions-cell"],["class","setting-row",4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"setting-row"],[1,"key-scope"],[1,"setting-key"],[1,"scope-badge"],["size","12",3,"img"],[1,"value-preview"],[1,"type-tag"],[1,"description-text"],["title","Modifier",1,"action-btn","edit",3,"click"],["size","16",3,"img"],["title","Supprimer",1,"action-btn","delete",3,"click"],["colspan","5",1,"empty-state"],["size","48",3,"img"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["size","20",3,"img"],[3,"ngSubmit"],[1,"modal-body"],[1,"form-group"],["for","key"],["type","text","id","key","name","key","required","","placeholder","ex: api_timeout",3,"ngModelChange","ngModel"],[1,"form-row"],["for","type"],["id","type","name","type","required","",3,"ngModelChange","ngModel"],["value","string"],["value","number"],["value","boolean"],["value","json"],["for","scope"],["type","text","id","scope","name","scope","required","","placeholder","global",3,"ngModelChange","ngModel"],["for","value"],["id","value","name","value","required","","rows","3",3,"ngModelChange","ngModel","placeholder"],["for","description"],["id","description","name","description","rows","2","placeholder","\xC0 quoi sert ce param\xE8tre ?",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(t,o){t&1&&(n(0,"div",1)(1,"header",2)(2,"div",3),u(3,"lucide-icon",4),n(4,"div")(5,"h1"),a(6,"Param\xE8tres"),i(),n(7,"p",5),a(8,"G\xE9rez les configurations globales et sp\xE9cifiques du syst\xE8me"),i()()(),n(9,"div",6)(10,"div",7),u(11,"lucide-icon",8),n(12,"input",9),b("ngModelChange",function(y){return _(o.searchQuery,y)||(o.searchQuery=y),y}),f("input",function(){return o.filterSettings()}),i()(),n(13,"button",10),f("click",function(){return o.openCreateModal()}),u(14,"lucide-icon",11),a(15," Nouveau Param\xE8tre "),i()()(),n(16,"div",12)(17,"div",13)(18,"div",14)(19,"table")(20,"thead")(21,"tr")(22,"th"),a(23,"Cl\xE9 / Scope"),i(),n(24,"th"),a(25,"Valeur"),i(),n(26,"th"),a(27,"Type"),i(),n(28,"th"),a(29,"Description"),i(),n(30,"th",15),a(31,"Actions"),i()()(),n(32,"tbody"),C(33,oe,22,11,"tr",16)(34,re,5,1,"tr",17),i()()()()(),C(35,ae,45,10,"div",18),i()),t&2&&(r(3),c("img",o.SettingsIcon),r(8),c("img",o.SearchIcon),r(),x("ngModel",o.searchQuery),r(2),c("img",o.PlusIcon),r(19),c("ngForOf",o.filteredSettings),r(),c("ngIf",o.filteredSettings.length===0),r(),c("ngIf",o.isModalOpen))},dependencies:[W,T,z,ne,K,$,ee,R,Z,X,Y,te,H,J,U,G],styles:[".settings-container[_ngcontent-%COMP%]{padding:80px 32px 32px;background:#f8fafc;min-height:100vh;margin-left:32px}.settings-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.header-icon[_ngcontent-%COMP%]{padding:12px;background:#fff;border-radius:12px;color:#4f46e5;box-shadow:0 4px 6px -1px #0000001a}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1e293b;margin:0}.subtitle[_ngcontent-%COMP%]{color:#64748b;margin:4px 0 0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.search-bar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#94a3b8}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 16px 10px 40px;border-radius:10px;border:1px solid #e2e8f0;background:#fff;width:300px;font-size:14px;transition:all .2s}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#4f46e5;color:#fff;padding:10px 20px;border-radius:10px;font-weight:500;border:none;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#4338ca;transform:translateY(-1px);box-shadow:0 4px 12px #4f46e533}.btn-primary[_ngcontent-%COMP%]:disabled{background:#94a3b8;cursor:not-allowed;transform:none}.settings-grid[_ngcontent-%COMP%]{display:grid;gap:24px}.settings-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 1px 3px #0000001a;overflow:hidden;border:1px solid #e2e8f0}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}th[_ngcontent-%COMP%]{background:#f8fafc;padding:16px;font-size:12px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em;border-bottom:1px solid #e2e8f0}td[_ngcontent-%COMP%]{padding:16px;vertical-align:middle;border-bottom:1px solid #f1f5f9;color:#334155;font-size:14px}.setting-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.key-scope[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.setting-key[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}.scope-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;background:#f1f5f9;color:#64748b;width:fit-content}.scope-badge.global[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.value-preview[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#f1f5f9;border-radius:6px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;color:#475569;overflow:hidden}.type-tag[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500;text-transform:capitalize}.type-tag[data-type=string][_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.type-tag[data-type=number][_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.type-tag[data-type=boolean][_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.type-tag[data-type=json][_ngcontent-%COMP%]{background:#fae8ff;color:#86198f}.description-text[_ngcontent-%COMP%]{color:#64748b;font-size:13px}.actions-cell[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:all .2s;color:#94a3b8}.action-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.action-btn.edit[_ngcontent-%COMP%]:hover{color:#4f46e5}.action-btn.delete[_ngcontent-%COMP%]:hover{color:#ef4444}.empty-state[_ngcontent-%COMP%]{padding:64px!important;text-align:center;color:#94a3b8}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-size:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0f172a66;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:2000;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:500px;box-shadow:0 20px 25px -5px #0000001a;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.4,0,.2,1)}.modal-header[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #f1f5f9;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:700;color:#1e293b}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#94a3b8;cursor:pointer;padding:4px;border-radius:6px}.close-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#64748b}.modal-body[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#475569;margin-bottom:8px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border-radius:8px;border:1px solid #e2e8f0;font-size:14px;color:#1e293b;transition:all .2s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.modal-footer[_ngcontent-%COMP%]{padding:24px;background:#f8fafc;border-bottom-left-radius:20px;border-bottom-right-radius:20px;display:flex;justify-content:flex-end;gap:12px}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;border-radius:10px;background:#fff;border:1px solid #e2e8f0;color:#475569;font-weight:500;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f1f5f9}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}"]});let p=m;return p})();export{fe as SettingsComponent};
